<!DOCTYPE html>
<html>
<head>
    <title>Frontend Connection Test</title>
</head>
<body>
    <h2>Test Frontend API Connection</h2>
    
    <div id="test-results"></div>
    
    <script>
        console.log('Testing frontend connection...');
        
        // Test the same API call that ResetPassword.jsx makes
        const API_URL = 'http://localhost/FARMMASTER-Backend';
        
        // Simulate what happens when reset password form is submitted
        async function testResetPasswordAPI() {
            const testData = {
                token: 'test123',
                password: 'TestPassword123!'
            };
            
            console.log('Making API call to:', `${API_URL}/api/users/reset-password`);
            console.log('With data:', testData);
            
            try {
                const response = await fetch(`${API_URL}/api/users/reset-password`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(testData)
                });
                
                console.log('Response status:', response.status);
                console.log('Response headers:', response.headers);
                
                const data = await response.json();
                console.log('Response data:', data);
                
                document.getElementById('test-results').innerHTML = `
                    <h3>API Test Results:</h3>
                    <p><strong>Status:</strong> ${response.status}</p>
                    <p><strong>Response:</strong></p>
                    <pre>${JSON.stringify(data, null, 2)}</pre>
                    <p><strong>Expected:</strong> Should show "Invalid or expired reset token" error</p>
                `;
                
                if (data.status === 'error' && data.message.includes('Invalid or expired')) {
                    document.getElementById('test-results').innerHTML += '<p style="color: green;"><strong>✅ Frontend → Backend connection is WORKING!</strong></p>';
                }
                
            } catch (error) {
                console.error('API call failed:', error);
                document.getElementById('test-results').innerHTML = `
                    <h3>Connection Failed:</h3>
                    <p style="color: red;"><strong>❌ Error:</strong> ${error.message}</p>
                    <p>This indicates a connection problem between frontend and backend.</p>
                `;
            }
        }
        
        // Run test when page loads
        testResetPasswordAPI();
    </script>
</body>
</html>